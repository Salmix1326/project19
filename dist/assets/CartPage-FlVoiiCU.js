import{u as d,j as t,a as u,b as x,c as m,d as h,e as g}from"./index-E7iVbXwC.js";function j({item:e,children:s}){const{t:r}=d(),a=e.quantity||1,n=(e.price||0)*a;return t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-4 flex flex-col gap-2 w-full sm:w-80 transition hover:shadow-lg",children:[t.jsx("div",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 truncate",children:e.name}),t.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:[r("cartCard.price"),":"," ",t.jsxs("span",{className:"font-medium",children:[e.price," ",r("cart.currency")]})]}),t.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:[r("cartCard.sum"),":"," ",t.jsxs("span",{className:"font-medium",children:[n," ",r("cart.currency")]})]}),t.jsx("div",{className:"mt-2",children:s})]})}function b({userId:e,productId:s,product:r}){const[a]=u();return t.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium",onClick:()=>a({userId:e,productId:s,product:r}),children:"+"})}function f({userId:e,productId:s}){const[r]=x();return t.jsx("button",{className:"px-2 py-1 rounded bg-yellow-600 hover:bg-yellow-700 text-white text-xs font-medium",onClick:()=>r({userId:e,productId:s}),children:"-"})}function p({userId:e,productId:s}){const[r]=m(),{t:a}=d();return t.jsx("button",{className:"px-2 py-1 rounded bg-red-600 hover:bg-red-700 text-white text-xs font-medium",onClick:()=>r({userId:e,productId:s}),children:a("cart.deleteButton")})}function v({product:e,userId:s}){return t.jsx(j,{item:e,children:t.jsxs("div",{className:"mt-2 flex items-center justify-between w-full",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(f,{userId:s,productId:e.id,className:"px-2 py-1 bg-gray-200 dark:bg-slate-700 rounded hover:bg-gray-300 dark:hover:bg-slate-600 transition"}),t.jsx("span",{className:"text-sm font-medium",children:e.quantity||1}),t.jsx(b,{userId:s,productId:e.id,product:e,className:"px-2 py-1 bg-gray-200 dark:bg-slate-700 rounded hover:bg-gray-300 dark:hover:bg-slate-600 transition"})]}),t.jsx(p,{userId:s,productId:e.id,className:"px-2 py-1 bg-red-500 hover:bg-red-600 text-white rounded transition"})]})})}function y({userId:e}){const{data:s={},isLoading:r}=h(e),a=Object.entries(s).filter(([i,c])=>c),{t:n}=d(),l=a.reduce((i,[c,o])=>i+(o.price||0)*(o.quantity||1),0);return r?t.jsxs("div",{children:[n("shared"),"..."]}):t.jsxs("div",{children:[a.length===0&&t.jsx("div",{children:n("cart.emptyCart")}),a.map(([i,c])=>t.jsx(v,{product:c,userId:e},i)),a.length>0&&t.jsxs("div",{style:{marginTop:16,fontWeight:"bold"},children:[n("cart.totalSum"),": ",l]})]})}function N(){const{t:e}=d(),s=g(r=>r.auth.user);return s?t.jsxs("div",{children:[t.jsx("h1",{children:e("cart.title")}),t.jsx(y,{userId:s.uid})]}):t.jsx("div",{children:e("cart.regCart")})}export{N as default};
