import{h as N,i as k,k as S,l as c,u as p,r as h,m as y,j as a,n as w,o as P}from"./index-E7iVbXwC.js";import{u as U,o as L,I as u}from"./yup-CAIXkBua.js";function q(){const[e,{isLoading:s,error:o}]=N(),[i,{isLoading:n,error:t}]=k();return{login:async l=>{await e(l).unwrap()},googleLogin:async()=>{await i().unwrap()},isLoading:s||n,error:o||t}}const E=e=>S().shape({nickName:c().trim().required(()=>e("validation.nickName.required")).min(2,()=>e("validation.nickName.min")).max(30,()=>e("validation.nickName.max")),email:c().email(()=>e("validation.email.invalid")).required(()=>e("validation.email.required")),password:c().min(8,()=>e("validation.password.min")).matches(/[a-z]/,()=>e("validation.password.lowercase")).matches(/[0-9]/,()=>e("validation.password.number")).required(()=>e("validation.password.required"))}),M=e=>S().shape({email:c().email(()=>e("validation.email.invalid")).required(()=>e("validation.email.required")),password:c().min(8,()=>e("validation.password.min")).matches(/[a-z]/,()=>e("validation.password.lowercase")).matches(/[0-9]/,()=>e("validation.password.number")).required(()=>e("validation.password.required"))}),G={email:"",password:""},R=()=>{const{t:e}=p(),s=M(e),o=U({mode:"onBlur",defaultValues:G,resolver:L(s)}),i=h.useMemo(()=>({errors:o.formState.errors}),[o.formState.errors]);return{...o,field:i}};function T(){const{login:e,googleLogin:s,isLoading:o,error:i}=q(),{t:n}=p(),t=y(),[g,r]=h.useState(""),{register:l,handleSubmit:m,formState:{errors:f}}=R(),d=async x=>{r("");try{await e(x),t(w.pages.HomePage.navigationPath)}catch(b){r(b?.data?.message||n("loginForm.loginError"))}},v=async()=>{r("");try{await s(),t(w.pages.HomePage.navigationPath)}catch(x){r(x?.message||n("loginForm.googleLoginError"))}};return a.jsxs("form",{onSubmit:m(d),className:"w-full flex flex-col gap-4",children:[a.jsx(u,{label:n("loginForm.email"),placeholder:n("loginForm.email"),error:f.email?.message,...l("email")}),a.jsx(u,{label:n("loginForm.password"),type:"password",placeholder:n("loginForm.password"),error:f.password?.message,...l("password")}),a.jsx("button",{type:"submit",disabled:o,children:n("loginForm.login")}),a.jsx("button",{type:"button",onClick:v,disabled:o,children:"Google"}),(i||g)&&a.jsx("div",{className:"text-red-500 mt-1",children:g||i?.data?.message})]})}function V(){const[e,{isLoading:s,error:o}]=P();return{signUp:async n=>{await e(n).unwrap()},isLoading:s,error:o}}const B={nickName:"",email:"",password:""},H=()=>{const{t:e}=p(),s=E(e),o=U({mode:"onBlur",defaultValues:B,resolver:L(s)}),i=h.useMemo(()=>({errors:o.formState.errors}),[o.formState.errors]);return{...o,field:i}};function $({onSuccess:e}){const{signUp:s,isLoading:o,error:i}=V(),[n,t]=h.useState(""),g=y(),{t:r}=p(),l=()=>{const{register:m,handleSubmit:f,field:{errors:d},formState:{isSubmitting:v,isValid:x}}=H(),b=async j=>{t("");try{await s(j),e&&e(),g(w.pages.HomePage.navigationPath)}catch(F){t(F?.message||r("signUpForm.signUpError"))}};return a.jsxs("form",{onSubmit:f(b),className:"w-full flex flex-col gap-4",children:[a.jsx(u,{label:r("signUpForm.name"),placeholder:r("signUpForm.name"),error:d.nickName?.message,...m("nickName")}),a.jsx(u,{label:r("signUpForm.email"),placeholder:r("signUpForm.email"),error:d.email?.message,...m("email")}),a.jsx(u,{label:r("signUpForm.password"),type:"password",placeholder:r("signUpForm.password"),error:d.password?.message,...m("password")}),a.jsx("button",{type:"submit",disabled:o,className:"w-full py-3 rounded-lg bg-gradient-to-r from-blue-500 to-indigo-500 text-white font-semibold text-base shadow-md hover:from-blue-600 hover:to-indigo-600 transition disabled:opacity-60 disabled:cursor-not-allowed",children:r("signUpForm.signUpButton")}),(i||n)&&a.jsx("div",{className:"text-red-500 text-sm font-medium mt-1",children:n||i?.data?.message||r("signUpForm.signUpError")})]})};return a.jsx(l,{})}function I(){const[e,s]=h.useState(!1),{t:o}=p();return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 transition-colors",children:a.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-900 rounded-2xl shadow-xl p-8 flex flex-col items-center gap-6 border border-gray-100 dark:border-gray-800",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2 select-none",children:o(e?"loginPage.regTypeSignUp":"loginPage.regTypeLogin")}),e?a.jsx($,{onSuccess:()=>s(!1)}):a.jsx(T,{onSuccess:()=>{}}),a.jsx("button",{className:"mt-2 text-blue-600 dark:text-blue-400 hover:underline font-medium text-base transition",type:"button",onClick:()=>s(i=>!i),children:o(e?"loginPage.regTypeLogin":"loginPage.regTypeSignUp")})]})})}export{I as default};
